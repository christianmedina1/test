<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link href="style.css" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Nunito+Sans:wght@300&display=swap" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/web3/1.7.0-rc.0/web3.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/handlebars.js/4.7.7/handlebars.min.js"></script>
<script src="https://unpkg.com/f0js@0.0.12/dist/f0.js"></script>
<script src="https://unpkg.com/@lottiefiles/lottie-player@latest/dist/lottie-player.js"></script>
<script id="template" type="text/x-handlebars-template">
  
 
    <h2 class="box2">Welcome to AVAIL</h2>
  <lottie-player src="https://assets7.lottiefiles.com/packages/lf20_mriqekmt.json" background="transparent"  speed="1"  style="width: 600px; height: 600px;" id="positioned-image" loop autoplay></lottie-player>
  <h2 id="bigger-text" class="box2">Reimagining the way athletes become sponsored.</h2>
  <div style="width: 50%;float:left; margin: 0 auto;"></div>
  <h2 id="positioned-text">About</h2>
  <p id="positioned-text">Professional runners are few and far between. Without a formal league/ team ownership structure found in major sports, runners rely on sponsorship deals to survive. The athletes who are fortunate enough to secure pro running contracts are multi-time NCAA champions and even then the salaries barely support athletes in their athletic pursuit.<br><br>

    Those on the cusp of reaching the next level have a longer journey to prove their worth by tapping into their own finances to keep the dream alive.<br><br>
    
    Avail seeks to promote accessibility to the sport and drive innovation by reimagining how athletes become sponsored.</p>
  </div>
  <div style="width: 40%; float:right; margin: 0px auto;">
    <lottie-player src="https://assets6.lottiefiles.com/packages/lf20_kzzwyypt.json" background="transparent"  speed="1"  style="width: 250px; height: 250px;" loop autoplay></lottie-player>
  </div>
  <div class="box4">
  <h2 id="positioned-text">How it Works</h2>
  <p id="shiftpleft">NFTs (non-fungible tokens) are non-interchangeable unit of data stored on a blockchain, a form of digital ledger. In other words, NFTs are digital programmable assets commonly in the form of photos, videos, and audio that are unique and immutable.<br><br>

    Avail will launch NFT collections in partnership with pro/non-pro runners to provide more funding to athletes. Once NFTs are first minted (sold), the runner advertised will receive all mint revenue generated through the collection. Once NFTs are sold on the secondary market, 5% of royalties on each transaction will go to a community fund where NFT holders will possess the right to vote on an athlete to sponsor.</p>
  </div>
  <div id="box3">
  <img src="{{image}}">
  <h2>{{title}}</h2>
  <table class='invites'>
  <tr>
    <th>mint price</th>
    <th>mint limit</th>
    <th>Invite</th>
  </tr>
  {{#each items}}
    <tr>
      <td>{{eth}} ETH</td>
      <td>{{limit}}</td>
      <td><a class='btn' href="mint#address={{address}}&key={{key}}">Go</td</a></td>
    </tr>
  {{/each}}
  </table>
</div>
</script>
<script>
const f0 = new F0()
const web3= new Web3(window.ethereum)
const template = Handlebars.compile(document.querySelector("#template").innerHTML);
document.addEventListener("DOMContentLoaded", async () => {
  let config = await fetch("box.json").then((r) => {
    return r.json()
  })
  let net = await web3.eth.getChainId()
  console.log("net = ", net)
  await window.ethereum.send('eth_requestAccounts');
  try {
    await f0.init({
      web3: web3,
      contract: config.contract,
      network: config.network
    })
    const name = await f0.name()
    const symbol = await f0.symbol()
    const placeholder = await f0.placeholder()
    const invites = await f0.myInvites()
    document.querySelector(".box").innerHTML = template({
      title: `${name} (${symbol}) Invite List`,
      image: placeholder.converted.image,
      items: Object.keys(invites).map((key, index) => {
        return {
          index: index,
          address: config.contract,
          key: key,
          eth: invites[key].condition.converted.eth,
          limit: invites[key].condition.converted.limit
        }
      })
    })
  } catch (e) {
    document.querySelector(".box").innerHTML = `<h1>${e.message.toLowerCase()}</h1>`
  }
})
</script>
</head>
<body>
<div class='box'></div>
</body>
</html>
